\hypertarget{_game_8hpp_source}{}\doxysection{Game.\+hpp}
\label{_game_8hpp_source}\index{Project1/Project1/Game.hpp@{Project1/Project1/Game.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#include "{}World.hpp"{}}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#include "{}Player.h"{}}}
\DoxyCodeLine{3 \textcolor{preprocessor}{\#include "{}StateStack.h"{}}}
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include "{}TextUtil.h"{}}}
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{6 }
\DoxyCodeLine{7 \textcolor{keyword}{enum class} RenderLayer : \textcolor{keywordtype}{int}}
\DoxyCodeLine{8 \{}
\DoxyCodeLine{9     Opaque = 0,}
\DoxyCodeLine{10     AlphaTested,}
\DoxyCodeLine{11     Count}
\DoxyCodeLine{12 \};}
\DoxyCodeLine{13 }
\DoxyCodeLine{24 \textcolor{keyword}{class }\mbox{\hyperlink{class_game}{Game}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_d3_d_app}{D3DApp}}}
\DoxyCodeLine{25 \{}
\DoxyCodeLine{26 \textcolor{keyword}{public}:}
\DoxyCodeLine{27     \mbox{\hyperlink{class_game}{Game}}(HINSTANCE hInstance);}
\DoxyCodeLine{28     \mbox{\hyperlink{class_game}{Game}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_game}{Game}}\& rhs) = \textcolor{keyword}{delete};}
\DoxyCodeLine{29     \mbox{\hyperlink{class_game}{Game}}\& operator=(\textcolor{keyword}{const} \mbox{\hyperlink{class_game}{Game}}\& rhs) = \textcolor{keyword}{delete};}
\DoxyCodeLine{30     \mbox{\hyperlink{class_game}{\string~Game}}();}
\DoxyCodeLine{31 }
\DoxyCodeLine{32     \textcolor{keyword}{virtual} \textcolor{keywordtype}{bool} Initialize()\textcolor{keyword}{override};}
\DoxyCodeLine{33 }
\DoxyCodeLine{35     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_game_acae2fc6ed9458cb5b5229e3e08cd2b32}{RenderText}}(\mbox{\hyperlink{struct_font}{Font}} font, std::wstring text, XMFLOAT2 pos, XMFLOAT2 scale = XMFLOAT2(1.0f, 1.0f), std::vector<XMFLOAT4> color = \{ XMFLOAT4(1.0f, 1.0f, 1.0f, 1.0f) \}, XMFLOAT2 padding = XMFLOAT2(0.5f, 0.0f));}
\DoxyCodeLine{36     }
\DoxyCodeLine{38     \mbox{\hyperlink{struct_font}{Font}} \mbox{\hyperlink{class_game_a652a742bc682ee577c453d4b8815f4ea}{mArialFont}};}
\DoxyCodeLine{39 }
\DoxyCodeLine{40 \textcolor{keyword}{private}:}
\DoxyCodeLine{41     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} OnResize()\textcolor{keyword}{override};}
\DoxyCodeLine{42     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} Update(\textcolor{keyword}{const} \mbox{\hyperlink{class_game_timer}{GameTimer}}\& gt)\textcolor{keyword}{override};}
\DoxyCodeLine{43     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} Draw(\textcolor{keyword}{const} \mbox{\hyperlink{class_game_timer}{GameTimer}}\& gt)\textcolor{keyword}{override};}
\DoxyCodeLine{44 }
\DoxyCodeLine{45     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} OnMouseDown(WPARAM btnState, \textcolor{keywordtype}{int} x, \textcolor{keywordtype}{int} y)\textcolor{keyword}{override};}
\DoxyCodeLine{46     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} OnMouseUp(WPARAM btnState, \textcolor{keywordtype}{int} x, \textcolor{keywordtype}{int} y)\textcolor{keyword}{override};}
\DoxyCodeLine{47     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} OnMouseMove(WPARAM btnState, \textcolor{keywordtype}{int} x, \textcolor{keywordtype}{int} y)\textcolor{keyword}{override};}
\DoxyCodeLine{48     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} OnAnyKeyDown();}
\DoxyCodeLine{49 }
\DoxyCodeLine{50     \textcolor{keywordtype}{void} OnKeyboardInput(\textcolor{keyword}{const} \mbox{\hyperlink{class_game_timer}{GameTimer}}\& gt);}
\DoxyCodeLine{51     \textcolor{keywordtype}{void} UpdateCamera(\textcolor{keyword}{const} \mbox{\hyperlink{class_game_timer}{GameTimer}}\& gt);}
\DoxyCodeLine{52     \textcolor{keywordtype}{void} AnimateMaterials(\textcolor{keyword}{const} \mbox{\hyperlink{class_game_timer}{GameTimer}}\& gt);}
\DoxyCodeLine{53     \textcolor{keywordtype}{void} UpdateObjectCBs(\textcolor{keyword}{const} \mbox{\hyperlink{class_game_timer}{GameTimer}}\& gt);}
\DoxyCodeLine{54     \textcolor{keywordtype}{void} UpdateMaterialCBs(\textcolor{keyword}{const} \mbox{\hyperlink{class_game_timer}{GameTimer}}\& gt);}
\DoxyCodeLine{55     \textcolor{keywordtype}{void} UpdateMainPassCB(\textcolor{keyword}{const} \mbox{\hyperlink{class_game_timer}{GameTimer}}\& gt);}
\DoxyCodeLine{56 }
\DoxyCodeLine{57     \textcolor{comment}{//step5}}
\DoxyCodeLine{58     \textcolor{keywordtype}{void} LoadTextures();}
\DoxyCodeLine{59 }
\DoxyCodeLine{60     \textcolor{keywordtype}{void} BuildRootSignature();}
\DoxyCodeLine{61 }
\DoxyCodeLine{62     \textcolor{comment}{//step9}}
\DoxyCodeLine{63     \textcolor{keywordtype}{void} BuildDescriptorHeaps();}
\DoxyCodeLine{64 }
\DoxyCodeLine{65     \textcolor{keywordtype}{void} BuildShadersAndInputLayout();}
\DoxyCodeLine{66     \textcolor{keywordtype}{void} BuildShapeGeometry();}
\DoxyCodeLine{67     \textcolor{keywordtype}{void} BuildPSOs();}
\DoxyCodeLine{68     \textcolor{keywordtype}{void} BuildFrameResources();}
\DoxyCodeLine{69     \textcolor{keywordtype}{void} BuildMaterials();}
\DoxyCodeLine{70     \textcolor{keywordtype}{void} BuildRenderItems();}
\DoxyCodeLine{71     \textcolor{keywordtype}{void} DrawRenderItems(ID3D12GraphicsCommandList* cmdList, \textcolor{keyword}{const} std::vector<RenderItem*>\& ritems);}
\DoxyCodeLine{72     \textcolor{keywordtype}{void} BuildFonts();}
\DoxyCodeLine{73 }
\DoxyCodeLine{74     std::array<const CD3DX12\_STATIC\_SAMPLER\_DESC, 6> GetStaticSamplers();}
\DoxyCodeLine{75 \textcolor{keyword}{private}:}
\DoxyCodeLine{76 }
\DoxyCodeLine{77     std::vector<std::unique\_ptr<FrameResource>> mFrameResources;}
\DoxyCodeLine{78     \mbox{\hyperlink{struct_frame_resource}{FrameResource}}* mCurrFrameResource = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{79     \textcolor{keywordtype}{int} mCurrFrameResourceIndex = 0;}
\DoxyCodeLine{80 }
\DoxyCodeLine{81     UINT mCbvSrvDescriptorSize = 0;}
\DoxyCodeLine{82 }
\DoxyCodeLine{83     ComPtr<ID3D12RootSignature> mRootSignature = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{84 }
\DoxyCodeLine{85     \textcolor{comment}{//step11}}
\DoxyCodeLine{86     ComPtr<ID3D12DescriptorHeap> mSrvDescriptorHeap = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{87 }
\DoxyCodeLine{88     std::unordered\_map<std::string, std::unique\_ptr<MeshGeometry>> mGeometries;}
\DoxyCodeLine{89     std::unordered\_map<std::string, std::unique\_ptr<Material>> mMaterials;}
\DoxyCodeLine{90 }
\DoxyCodeLine{91     \textcolor{comment}{//step7}}
\DoxyCodeLine{92     std::unordered\_map<std::string, std::unique\_ptr<Texture>> mTextures;}
\DoxyCodeLine{93 }
\DoxyCodeLine{94     std::unordered\_map<std::string, ComPtr<ID3DBlob>> mShaders;}
\DoxyCodeLine{95 }
\DoxyCodeLine{96     std::vector<D3D12\_INPUT\_ELEMENT\_DESC> mInputLayout;}
\DoxyCodeLine{97     std::vector<D3D12\_INPUT\_ELEMENT\_DESC> mTextInputLayout;}
\DoxyCodeLine{98     }
\DoxyCodeLine{99     \textcolor{comment}{// PSOs}}
\DoxyCodeLine{100     std::unordered\_map<std::string, ComPtr<ID3D12PipelineState>> mPSOs;}
\DoxyCodeLine{101 }
\DoxyCodeLine{102 }
\DoxyCodeLine{103     \textcolor{comment}{// List of all the render items.}}
\DoxyCodeLine{104     std::vector<std::unique\_ptr<RenderItem>> mAllRitems;}
\DoxyCodeLine{105 }
\DoxyCodeLine{106     \mbox{\hyperlink{struct_pass_constants}{PassConstants}} mMainPassCB;}
\DoxyCodeLine{107 }
\DoxyCodeLine{108     \textcolor{comment}{// Render items divided by PSO.}}
\DoxyCodeLine{109     std::vector<RenderItem*> mRitemLayer[(int)RenderLayer::Count];}
\DoxyCodeLine{110 }
\DoxyCodeLine{111     \textcolor{comment}{//XMFLOAT3 mEyePos = \{ 0.0f, 0.0f, -\/10.0f \};}}
\DoxyCodeLine{112     \textcolor{comment}{//XMFLOAT4X4 mView = MathHelper::Identity4x4();}}
\DoxyCodeLine{113     \textcolor{comment}{//XMFLOAT4X4 mProj = MathHelper::Identity4x4();}}
\DoxyCodeLine{114 }
\DoxyCodeLine{115     \textcolor{comment}{//float mTheta = 1.3f * XM\_PI;}}
\DoxyCodeLine{116     \textcolor{comment}{//float mPhi = 0.4f * XM\_PI;}}
\DoxyCodeLine{117     \textcolor{comment}{//float mRadius = 2.5f;}}
\DoxyCodeLine{118 }
\DoxyCodeLine{119     POINT mLastMousePos;}
\DoxyCodeLine{120     \mbox{\hyperlink{class_camera}{Camera}} mCamera;}
\DoxyCodeLine{121     \mbox{\hyperlink{class_world}{World}} mWorld;}
\DoxyCodeLine{122     \mbox{\hyperlink{class_player}{Player}} mPlayer;}
\DoxyCodeLine{123     \mbox{\hyperlink{class_state_stack}{StateStack}} mStateStack;}
\DoxyCodeLine{124 }
\DoxyCodeLine{125 }
\DoxyCodeLine{126     \textcolor{keywordtype}{int} maxNumTextCharacters = 1024; \textcolor{comment}{// the maximum number of characters you can render during a frame. This is just used to make sure}}
\DoxyCodeLine{127                                     \textcolor{comment}{// there is enough memory allocated for the text vertex buffer each frame}}
\DoxyCodeLine{128 }
\DoxyCodeLine{129     \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{int} mFrameBufferCount = 1; \textcolor{comment}{// number of buffers we want, 2 for double buffering, 3 for tripple buffering}}
\DoxyCodeLine{130     ID3D12Resource* mTextVertexBuffer[mFrameBufferCount];}
\DoxyCodeLine{131     D3D12\_VERTEX\_BUFFER\_VIEW mTextVertexBufferView[mFrameBufferCount]; \textcolor{comment}{// a view for our text vertex buffer}}
\DoxyCodeLine{132     UINT8* mTextVBGPUAddress[mFrameBufferCount]; \textcolor{comment}{// this is a pointer to each of the text constant buffers}}
\DoxyCodeLine{133     UINT8 mSrvHandlSize;}
\DoxyCodeLine{134 }
\DoxyCodeLine{135     \mbox{\hyperlink{struct_font}{Font}} LoadFont(LPCWSTR filename, \textcolor{keywordtype}{int} windowWidth, \textcolor{keywordtype}{int} windowHeight); \textcolor{comment}{// load a font}}
\DoxyCodeLine{136 }
\DoxyCodeLine{137 }
\DoxyCodeLine{138 }
\DoxyCodeLine{139 \textcolor{keyword}{public}:}
\DoxyCodeLine{140     std::vector<std::unique\_ptr<RenderItem>>\& getRenderItems() \{ \textcolor{keywordflow}{return} mAllRitems; \}}
\DoxyCodeLine{141     std::unordered\_map<std::string, std::unique\_ptr<Material>>\& getMaterials() \{ \textcolor{keywordflow}{return} mMaterials; \}}
\DoxyCodeLine{142     std::unordered\_map<std::string, std::unique\_ptr<MeshGeometry>>\& getGeometries() \{ \textcolor{keywordflow}{return} mGeometries; \}}
\DoxyCodeLine{143 \};}

\end{DoxyCode}
